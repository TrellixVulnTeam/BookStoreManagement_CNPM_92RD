{% extends 'base/base.html' %}

{% block content %}
<h2 class="text text-center">Thông tin cá nhân</h2>
<div class="container">
<form>
  <div class="form-row">
      <div class="form-group">
          <a href="/pay">Quay lại trang giỏ hàng</a>
      </div>
    <div class="form-group col-md-6">
      <label for="name_receiver">Họ Tên Người Nhận</label>
      <input type="email" class="form-control" id="name_receiver">
    </div>
    <div class="form-group col-md-6">
      <label for="phone_number_receiver">SDT Người Nhận</label>
      <input type="password" class="form-control" id="phone_number_receiver">
    </div>
  </div>
  <div class="form-group">
    <label for="address_receiver">Địa chỉ</label>
    <input type="text" class="form-control" id="address_receiver" placeholder="1 Võ Văn Ngân, p. Linh Chiểu, q. Thủ Đức">
  </div>
  <div class="form-row">
    <div class="form-group col-md-6">
      <label for="discount_receiver">Mã Giảm Giá</label>
      <input type="text" class="form-control" id="discount_receiver">
    <table class="table">
        <tr>
            <th>Tên</th>
            <th>Giá khuyến mãi</th>
            <th>Số lượng</th>
            <th>Thành tiền</th>
        </tr>
        {% if id_cart != [] and list_item != [] %}
        {% for p in list_item %}
        {% if p.would_buy ==1 %}
        <tr>
            {% for b in list_book %}
            {% if b.id == p.id_book %}
            <td>{{b.name}}</td>
            {% endif %}
            {% endfor %}
            <td>{{p.discount}}</td>
            <td>{{p.quantity}}</td>
            <td>{{p.discount * p.quantity }}</td>

        </tr>
        {% endif %}
        {% endfor %}
        {% endif %}
    </table>
    <div class="form-group col-md-4">

  <input type="button"
         value="Thanh Toan"
         onclick="pay()"
         class="btn btn-primary"
  id="pay-button"/>
        <div id="paypal-button-container"></div>
  </div>

    </div>
  </div>
<!--</form>-->


</form>
</div>



<!--<script>-->
<!--        // Render the PayPal button into #paypal-button-container-->
<!--        paypal.Buttons({-->

<!--            // Set up the transaction-->
<!--            createOrder: function(data, actions) {-->
<!--                return actions.order.create({-->
<!--                    purchase_units: [{-->
<!--                        amount: {-->
<!--                            value: {{total_amount}}-->
<!--                        }-->
<!--                    }]-->
<!--                });-->
<!--            },-->

<!--            // Finalize the transaction-->
<!--            onApprove: function(data, actions) {-->
<!--                return actions.order.capture().then(function(details) {-->
<!--                    // Show a success message to the buyer-->
<!--                    alert('Transaction completed by ' + details.payer.name.given_name + '!')-->
<!--                    document.getElementById("pay-button").click()-->
<!--                });-->
<!--            }-->


<!--        }).render('#paypal-button-container');-->
<!--    </script>-->

  <script
    src="https://www.paypal.com/sdk/js?client-id=AXUu35BkAmvGkViL59oIiUq43ojO6SWzwJk32RcNIh98E8Cq2qHQ8YDS0fB-Rz3MijPLn0FPYuSyXWy_"> // Required. Replace SB_CLIENT_ID with your sandbox client ID.
  </script>



<script>
        // Render the PayPal button into #paypal-button-container
        paypal.Buttons({

            // Set up the transaction
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: {{ dola }}
                        }
                    }]
                });
            },

            // Finalize the transaction
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    // Show a success message to the buyer
                    alert('Transaction completed by ' + details.payer.name.given_name + '!')
                    document.getElementById("pay-button").click()
                });
            }


        }).render('#paypal-button-container');
    </script>
{% endblock %}
